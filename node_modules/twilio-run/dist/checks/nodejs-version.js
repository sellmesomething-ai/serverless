"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.printVersionWarning = void 0;
const common_tags_1 = require("common-tags");
const logger_1 = require("../utils/logger");
const SERVERLESS_NODE_JS_VERSION = ['14.', '16.'];
function printVersionWarning(nodeVersion, expectedVersion) {
    const title = 'Different Node.js Version Found';
    const msg = (0, common_tags_1.stripIndent) `
      You are currently running Node.js ${nodeVersion} on this local machine. The production environment for Twilio Serverless currently supports versions ${expectedVersion}x.

      When you deploy to Twilio Serverless, you may encounter differences between local development and production.

      For a more accurate local development experience, please switch your Node.js version.
      A tool like nvm (https://github.com/creationix/nvm) can help.
  `;
    logger_1.logger.warn(msg, title);
}
exports.printVersionWarning = printVersionWarning;
function checkNodejsVersion() {
    const nodeVersion = process.versions.node;
    if (!SERVERLESS_NODE_JS_VERSION.some((nodeJsVersion) => nodeVersion.startsWith(nodeJsVersion))) {
        printVersionWarning(nodeVersion, SERVERLESS_NODE_JS_VERSION);
    }
}
exports.default = checkNodejsVersion;
